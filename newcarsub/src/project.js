require=function r(c,o,s){function l(t,e){if(!o[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=o[t]={exports:{}};c[t][0].call(i.exports,function(e){return l(c[t][1][e]||e)},i,i.exports,r,c,o,s)}return o[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({RankItem:[function(e,t,n){"use strict";cc._RF.push(t,"905883OUkRPUoJSsOopEXCF","RankItem"),cc.Class({extends:cc.Component,properties:{rank:cc.Label,ImgSprite:cc.Sprite,nickname:cc.Label,score:cc.Label},start:function(){this.node.setCascadeOpacityEnabled(!1)},init:function(e,t){var n=t.avatarUrl,a=t.nickname;this.rank.string=(e+1).toString(),this.nickname.string=a,this.score.string=t.KVDataList[0].value,this.createImage(n)},createImage:function(e){var n=this;if(null!=window.wx)try{var t=wx.createImage();t.onload=function(){try{var e=new cc.Texture2D;e.initWithElement(t),e.handleLoadedTexture(),n.ImgSprite.spriteFrame=new cc.SpriteFrame(e)}catch(e){n.ImgSprite.node.active=!1}},e&&(t.src=e)}catch(e){}else cc.loader.load({url:e,type:"jpg"},function(e,t){n.ImgSprite.spriteFrame=new cc.SpriteFrame(t)})}}),cc._RF.pop()},{}],lanuch:[function(e,t,n){"use strict";cc._RF.push(t,"4874dn6l+pDyq8ZeEXOiKD3","lanuch"),cc.Class({extends:cc.Component,properties:{scrollViewContent:cc.Node,prefabRankItem:cc.Prefab,selfItem:cc.Node},start:function(){var t=this;null!=window.wx&&window.wx.onMessage(function(e){1==e.messageType?t.submitScore(e.KEY1,e.score):2==e.messageType&&t.fetchFriendData(e.KEY1)})},submitScore:function(t,n){null!=window.wx&&window.wx.getUserCloudStorage({keyList:[t],success:function(e){0!=e.KVDataList.length&&e.KVDataList[0].value>n||window.wx.setUserCloudStorage({KVDataList:[{key:t,value:""+n}],success:function(e){console.log("提交成功")},fail:function(e){console.log("提交成功")},complete:function(e){console.log("提交成功")}})},fail:function(e){},complete:function(e){}})},fetchFriendData:function(t){var o=this;this.scrollViewContent.removeAllChildren(),null!=window.wx&&wx.getUserInfo({openIdList:["selfOpenId"],success:function(e){var c=e.data[0];wx.getFriendCloudStorage({keyList:[t],success:function(e){var t=e.data;t.sort(function(e,t){return 0==e.KVDataList.length&&0==t.KVDataList.length?0:0==e.KVDataList.length?1:0==t.KVDataList.length?-1:t.KVDataList[0].value-e.KVDataList[0].value});var n=0;n=t.length<=50?t.length:50;for(var a=0;a<n;a++){var i=t[a],r=cc.instantiate(o.prefabRankItem);if(r.getComponent("RankItem").init(a,i),o.scrollViewContent.addChild(r),t[a].avatarUrl==c.avatarUrl)o.selfItem.getComponent("RankItem").init(a,i)}},fail:function(e){}})},fail:function(e){}})}}),cc._RF.pop()},{}]},{},["RankItem","lanuch"]);